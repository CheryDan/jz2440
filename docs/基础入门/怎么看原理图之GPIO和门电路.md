<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [怎么看原理图之GPIO和门电路](#怎么看原理图之gpio和门电路)
	- [什么是原理图？](#什么是原理图)
	- [硬件电路图分类](#硬件电路图分类)
	- [GPIO-高低电压形成电流](#gpio-高低电压形成电流)
	- [如何配置引脚功能？](#如何配置引脚功能)
	- [JZ2440 LED灯原理图](#jz2440-led灯原理图)
	- [配置引脚功能](#配置引脚功能)
	- [上拉电阻](#上拉电阻)
	- [电子电路基础知识](#电子电路基础知识)
	- [参考博客](#参考博客)
	- [END](#end)

<!-- /TOC -->

# 怎么看原理图之GPIO和门电路

## 什么是原理图？

![1535370306375.png](image/1535370306375.png)

大学课程基本这两本书涉及。

* 微机原理：侧重于讲计算机结构
* 数字电子技术基础：侧重于门电路

百度百科对电路原理图的定义如下:
```
电路图是指用电路元件符号表示电路连接的图。
电路图是人们为研究、工程规划的需要，用物理电学标准化的符号绘制的一种表示各元器件组成及器件关系的原理布局图。
由电路图可以得知组件间的工作原理，为分析性能、安装电子、电器产品提供规划方案。
在设计电路中，工程师可从容在纸上或电脑上进行，确认完善后再进行实际安装。
通过调试改进、修复错误、直至成功。采用电路仿真软件进行电路辅助设计、虚拟的电路实验，可提高工程师工作效率、节约学习时间，使实物图更直观。
```

* 电路图主要由元件符号、连线、结点、注释四大部分组成 。
  - 元件符号表示实际电路中的元件，它的形状与实际的元件不一定相似，甚至完全不一样。但是它一般都表示出了元件的特点，而且引脚的数目都和实际元件保持一致。
  - 连线表示的是实际电路中的导线，在原理图中虽然是一根线，但在常用的印刷电路板中往往不是线而是各种形状的铜箔块，就像收音机原理图中的许多连线在印刷电路板图中并不一定都是线形的，也可以是一定形状的铜膜。
  - 结点表示几个元件引脚或几条导线之间相互的连接关系。所有和结点相连的元件引脚、导线，不论数目多少，都是导通的。
  - 注释在电路图中是十分重要的，电路图中所有的文字都可以归入注释—类。细看以上各图就会发现，在电路图的各个地方都有注释存在，它们被用来说明元件的型号、名称等等。

![1535370569630.png](image/1535370569630.png)

![1535370625945.png](image/1535370625945.png)

![1535371868433.png](image/1535371868433.png)

## 硬件电路图分类

* 管脚类
* 协议类
* 类似内存的接口

![1535370409788.png](image/1535370409788.png)


## GPIO


* 通用的输入输出端口，可以通过输入来测量外界的电平情况；可以通过输出来控制电路
* GPIO(General Purpose Input/Output Port),即通用输入输出端口，就是芯片的一些引脚。作为输入端口时，我们可以通过它们读入引脚的状态--高电平或低电平，作为输出端口时，我们可以通过它们输出高电平或低电平来控制连接的外围设备。
* S3C2440有130个GPIO引脚，分为A~J共9组：GPA、GPB、…、GPJ。通过设置相应的寄存器来设置某个引脚的功能（输入或输出或是其他特殊功能）。

![1535372131919.png](image/1535372131919.png)

![1535415045259.png](image/1535415045259.png)



高低电压差形成电流，这个知识初中就学过。只要上面的2440芯片对应的引脚应该为输出引脚。如果对应的输出引脚输出3.3V的高电平LED就会被点亮；如果输出引脚输出低电平（0V），那么LED则不亮

![1535372170839.png](image/1535372170839.png)

如果接到芯片引脚。那么就有另外名词，**输入引脚**和**输出引脚**

![1535372233760.png](image/1535372233760.png)

![1535372274960.png](image/1535372274960.png)

万用表测量电压，如果开关没有闭合，那么就肯定是3.3V，因为没有电压差，没有电流。
一旦闭合，那么因为接地就是0V

![1535415127018.png](image/1535415127018.png)

以上的线路很简单，开关闭合线路接通有电流；开关打开，线路不导通，无电流。

如果在开关打开的前提下，A点使用万用表测量，电压应该为3.3v，因为，如果此时这里不为3.3V与之相连的上方为3.3V就会形成电流，与实际不符；如果此时开关闭合，那么该线路是接通状态，应该有电流流过，那么此时，A点的电流应该为0V。

![1535372333190.png](image/1535372333190.png)

![1535415181554.png](image/1535415181554.png)

输入引脚，就是根据外部电流、电压变化传递信号。典型的如上图，如果按键按下，那么引脚就会变成3V，并且有电流通过，那么根据输入引脚的电压信号就可以获知按键事件。如果是高电平说明按键是松开的，如果是低电平，说明按键是按下的。

那么此时2440对应的引脚应该为输入引脚，通过读取该引脚对应的寄存器中的数据，就可以知道该引脚为高电平还是低电平。如果读到了高电平，说明此处为3.3V电路没有接通了如果读到了低电平，说此处为0V，说明电路接通了。以此可以判断开关的开闭情况。

对于现在的芯片的引脚来说，既可以作为输入引脚，同样也可以作为输出引脚。可以通过配置其中参数的某一位（具体参照手册）的方法来改变其功能。
* 输出引脚，写值到某个寄存器中
* 输入引脚，读某个寄存器中的值。


![1535372503893.png](image/1535372503893.png)

如果想让LED灯亮，那么只需要引脚为高电平就可以了。以上基本都是一个道理，高低电压差形成电流。

## 如何配置引脚功能？

* 现在的处理器引脚可以定义成输入或输出。通过配置寄存器配置。
* 配置引脚功能
  - 输出引脚：写值到寄存器
  - 输入引脚：读取寄存器值

![1535372682799.png](image/1535372682799.png)

## JZ2440 LED灯原理图

![1535372712965.png](image/1535372712965.png)

如果要让某个LED灯亮灭，那么对应nLED设定好就阔以了。

![1535372755036.png](image/1535372755036.png)

![1535372767437.png](image/1535372767437.png)

nLED1接到了GPF4引脚。




## 配置引脚功能

![1535373094783.png](image/1535373094783.png)

![1535373113460.png](image/1535373113460.png)

* 嵌入式特点中有个专用，辣么你所面临的处理器基本确定，肯定要看其芯片手册，找到对应的配置说明，然后才能在软件层面配置
* 由以上两幅图可以看出，LED由某一个引脚引入到芯片中。就可以找到对应的芯片中的引脚。通过该芯片手册就可以查到该如何操作。
* 由LED的原理图可以看出，三个控制LED的引脚的功能都不是为了检测电压，那么都是输出引脚，也就是如果输出了低电平，则LED被点亮；输出高电平，则灯会熄灭。

在芯片手册中查询该引脚的信息

![1535373250863.png](image/1535373250863.png)

* 某个引脚一般会由一组寄存器控制，不会单单用一个太浪费

![1535373293305.png](image/1535373293305.png)

* 保留就是为了升级扩展使用。这里很明显看到设置成01就可以变成输出引脚

![1535373362510.png](image/1535373362510.png)

* GPFDAT当端口某个引脚被配置成


## 上拉电阻

![1535373487090.png](image/1535373487090.png)

![1535373591621.png](image/1535373591621.png)

反相电路。输出低电平，三极管截止。输出高电平，三极管导通。这里不是电气专业表示不懂呀。补补~

## 电子电路基础知识

![1535374377034.png](image/1535374377034.png)

![1535374299646.png](image/1535374299646.png)

![1535374481216.png](image/1535374481216.png)

![1535374800459.png](image/1535374800459.png)

![1535374832044.png](image/1535374832044.png)

![1535374844394.png](image/1535374844394.png)

![1535374871465.png](image/1535374871465.png)

![1535374908354.png](image/1535374908354.png)

![1535374939058.png](image/1535374939058.png)

![1535374960467.png](image/1535374960467.png)

![1535375066010.png](image/1535375066010.png)

P是positive，正极。N是negtive，负极

![1535375115316.png](image/1535375115316.png)

正向偏压

![1535375160014.png](image/1535375160014.png)

也即是说PN结点必须按照要求接入，否则无法使用。

![1535375239953.png](image/1535375239953.png)

![1535375268419.png](image/1535375268419.png)

整流电路基本就是去除保留某向电流

![1535375322802.png](image/1535375322802.png)

视频中讲到的，但是没有细说

![1535375383303.png](image/1535375383303.png)

发射极emit+基极base+集电极collect

![1535375424236.png](image/1535375424236.png)

这个，不懂~

![1535375497829.png](image/1535375497829.png)

![1535376370836.png](image/1535376370836.png)

![1535376361566.png](image/1535376361566.png)

![1535376351600.png](image/1535376351600.png)

![1535376387402.png](image/1535376387402.png)

![1535376575452.png](image/1535376575452.png)


## 参考博客

<https://www.jianshu.com/p/51358d1dd2d2>




## END
